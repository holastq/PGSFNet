name: test
model_type: SRModel
scale: 2
num_gpu: 1
manual_seed: 10

datasets:
  test_1:  # the 1st test dataset
    task: SR
    name: RealCE
    type: PairedImageDatasetRealCEwDEC
    dataroot_gt: ~/autodl-tmp/RealCE/test
    dataroot_lq: ~/autodl-tmp/RealCE/test
    filename_tmpl: '{}'
    io_backend:
      type: disk

# network structures
network_g:
  type: PGSFNet
  in_channels: 3
  out_channels: 3
  embed_dim: 96
  upscale: 2
  img_range: 1.0

  upsampler: "pixelshuffle"
  # upsampler: "freup_area"
  depths: [2, 1, 3]
  num_heads_window: [4, 4, 4]
  num_heads_stripe: [1, 1, 1]
  img_size: 64
  window_size: 4 
  stripe_shift: False
  mlp_ratio: 4.0
  qkv_bias: True
  qkv_proj_type: "linear"
  anchor_proj_type: "avgpool"
  anchor_one_stage: True
  anchor_window_down_factor: 1
  out_proj_type: "linear"
  local_connection: False
  drop_rate: 0.0
  attn_drop_rate: 0.0
  drop_path_rate: 0.1
  pretrained_window_size: [0, 0]
  pretrained_stripe_size: [0, 0]
  conv_type: "1conv"
  init_method: "n"

  num_filter: 3 #2
  filter_size: "(5,5)" #F_l
  use_gaussian: True
  gaussian_kernel_size: "(5,5)"
  gaussian_sigma: 0.5
  laplace_range: 4

  res_td: 1.0 #td + x
  td_attn_drop: 0.0
  td_res_scale: 1.0
  td_transformer_embed_dim: 96 #128
  td_transformer_num_heads: 4
  num_encoder_layers: 1
  num_decoder_layers: 1
  td_transformer_dropout: 0.1   
  td_window_size: 4
  normalize_before: True
  td_num_classes: 1
  td_num_queries: 200

# model_path
path:
  pretrain_network_g: ~/PGSFNet/net_g_best.pth
  strict_load_g: True

val:
  save_img: True
  suffix: ~  # add suffix to saved images, if None, use exp name
  use_chop: False
